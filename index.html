<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="author" content="Belton Zhong" />
    <link rel="stylesheet" href="./css/style.css" />
    <title>Testing Zipf's Law</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
		  function selectData() {
		    var element = document.getElementById("data-selector");
		    var string = element.options[element.selectedIndex].text;
		    var header = document.getElementById("data-title");
		    header.innerHTML = string;
		    //drawGraph();
		  }
		  
		  window.onload = function() {
		    var select = document.getElementById("data-selector");
		    var xobj = new XMLHttpRequest();
		    $.getJSON('/data/index.json', function(data) {
			    console.log(data);
		    }
		    initGraph();
		    //drawGraph();
		  }
		  
		  function initGraph() {
			  var graph = document.getElementById("graph");
			  var context = graph.getContext("2d");

			  //Draw axes
			  context.strokeStyle = "#99938E";
			  context.strokeRect(60, 0, 600, 355);

			  //Draw x-axis label
			  context.fillStyle = "#99938E";
			  context.font = "16px Arial";
			  context.textAlign = "center";
			  context.textBaseline = "bottom";
			  context.fillText("ln(Population)", 325, 395);

			  //Draw y-axis label
			  context.save();
			  context.rotate(-Math.PI / 2);
			  context.textBaseline = "top";
			  context.fillText("ln(Rank)", -175, 5);
			  context.restore();
		  }

		  function drawGraph() {
			  var dataSelector = document.getElementById("data-selector");
			  var datasetName = dataSelector.options[dataSelector.selectedIndex].value;
			  console.log(datasetName);
		  }
	  </script>
  </head>
 
  <body>
    <div id="left-side">
      <h1>TESTING <b>ZIPF'S LAW</b></h1>
      <p > George Kingsley Zipf observed that in languages, 
      the most frequently used word occurs twice as 
      often as the second most frequent word, three times 
      as often as the third most frequent word, etc. 
      This unexpectedly elegant distribution is called the 
      Zipfian rank-size power law distribution where frequency 
      is inversely proportional to rank.</p>
      <p> This phenomenon has been further found in other types 
      of data, including other language corpora, city populations 
      (Auerbach 1913), corporation sizes, and income rankings. We 
      want to find more instances of Zipf's. </p>
      <p> To test for Zipf's, we regress log rank = a - b log value. 
      Perfect Zipf's has a coefficient b = 1. Closer to 1 = closer to 
      Zipf's. We plot the data on a log-log graph with log frequency and 
      log rank to visually see how close it is to a perfect Zipfian 
      distribution. </p> 
      <p> This site is available on Github <a href="https://github.com/zipfs-law/zipfs-law.github.io">here</a>. </p>
    </div>
    
    <div id="right-side">
      <p>Select data </p>
	    <form>  
	      <select id="data-selector" onchange="selectData()">
	      </select>
	    </form>
	    <h2 id="data-title">Dataset 1</h2>
	    <canvas id="graph" width="600" height="400">
	      
	    </canvas>
    </div>
  </body>
</html>